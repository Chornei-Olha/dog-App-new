"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.factory=exports.name=exports.version=void 0;const typescript_1=__importDefault(require("typescript"));exports.version="1.1",exports.name="ts-jest-mock-import-meta";const defaultMetaObjectReplacement={url:__dirname};function factory(t,r){const e=a=>typescript_1.default.isMetaProperty(a)&&a.keywordToken===typescript_1.default.SyntaxKind.ImportKeyword&&a.name.text==="meta";return a=>s=>{const c=n=>e(n)?typescript_1.default.factory.createObjectLiteralExpression(createImportMetaReplacement(r?.metaObjectReplacement??defaultMetaObjectReplacement)):typescript_1.default.visitEachChild(n,c,a);return typescript_1.default.visitNode(s,c)}}exports.factory=factory;const createPropertyAssignmentValue=(t,r)=>{let e=typeof r=="function"?r():r;switch(typeof e){case"number":return typescript_1.default.factory.createNumericLiteral(e);case"string":return typescript_1.default.factory.createStringLiteral(e);case"boolean":return e?typescript_1.default.factory.createTrue():typescript_1.default.factory.createFalse();case"object":return typescript_1.default.factory.createObjectLiteralExpression(createImportMetaReplacement(e));default:throw new Error(`Property '${t}': value '${e}' type '${typeof e}' is not supported.`)}};function createImportMetaReplacement(t){let r=typeof t=="object"?t:t();return Object.entries(r).reduce((e,[o,a])=>(e.push(typescript_1.default.factory.createPropertyAssignment(typescript_1.default.factory.createIdentifier(o),createPropertyAssignmentValue(o,a))),e),[])}
